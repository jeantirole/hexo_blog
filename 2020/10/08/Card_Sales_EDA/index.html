<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Card_Sales_EDA</title><meta description="1234567# raw data load sales &amp;#x3D; pd.read_csv(&amp;amp;#x27;C:\Archaon\projects\Card_Sales\Dataset\copy_train.csv&amp;amp;#x27;)necessary_cols&amp;#x3D; [ &amp;amp;#x27;card_id&amp;amp;#x27;, &amp;amp;#x27;store_id&amp;amp;#x27;, &amp;amp;#x27;transacted_date&amp;amp;#x27;, &amp;amp;"><meta property="og:type" content="blog"><meta property="og:title" content="Card_Sales_EDA"><meta property="og:url" content="http://yoursite.com/2020/10/08/Card_Sales_EDA/"><meta property="og:site_name" content=""><meta property="og:description" content="1234567# raw data load sales &amp;#x3D; pd.read_csv(&amp;amp;#x27;C:\Archaon\projects\Card_Sales\Dataset\copy_train.csv&amp;amp;#x27;)necessary_cols&amp;#x3D; [ &amp;amp;#x27;card_id&amp;amp;#x27;, &amp;amp;#x27;store_id&amp;amp;#x27;, &amp;amp;#x27;transacted_date&amp;amp;#x27;, &amp;amp;"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://yoursite.com/img/Figure1_Memory.png"><meta property="og:image" content="http://yoursite.com/img/Figure_1_Store_id_counts.png"><meta property="og:image" content="http://yoursite.com/img/Figure_1_Card_company.png"><meta property="og:image" content="http://yoursite.com/img/Figure_1_Transacted_time_counts.png"><meta property="article:published_time" content="2020-10-08T04:05:12.000Z"><meta property="article:modified_time" content="2020-10-08T09:27:44.849Z"><meta property="article:author" content="Eric Park"><meta property="article:tag" content="Python"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/Figure1_Memory.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/10/08/Card_Sales_EDA/"},"headline":"","image":["http://yoursite.com/img/Figure1_Memory.png","http://yoursite.com/img/Figure_1_Store_id_counts.png","http://yoursite.com/img/Figure_1_Card_company.png","http://yoursite.com/img/Figure_1_Transacted_time_counts.png"],"datePublished":"2020-10-08T04:05:12.000Z","dateModified":"2020-10-08T09:27:44.849Z","author":{"@type":"Person","name":"Eric Park"},"description":"1234567# raw data load sales &#x3D; pd.read_csv(&amp;#x27;C:\\Archaon\\projects\\Card_Sales\\Dataset\\copy_train.csv&amp;#x27;)necessary_cols&#x3D; [ &amp;#x27;card_id&amp;#x27;, &amp;#x27;store_id&amp;#x27;, &amp;#x27;transacted_date&amp;#x27;, &amp;"}</script><link rel="canonical" href="http://yoursite.com/2020/10/08/Card_Sales_EDA/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.1.1"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12-tablet is-12-desktop is-12-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-10-08T04:05:12.000Z" title="2020-10-08T04:05:12.000Z">2020-10-08</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-08T09:27:44.849Z" title="2020-10-08T09:27:44.849Z">2020-10-08</time></span><span class="level-item"><a class="link-muted" href="/categories/Portfolio/">Portfolio</a></span><span class="level-item">8 minutes read (About 1171 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Card_Sales_EDA</h1><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># raw data load </span></span><br><span class="line">sales = pd.read_csv(<span class="string">&#x27;C:\Archaon\projects\Card_Sales\Dataset\copy_train.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">necessary_cols= [ <span class="string">&#x27;card_id&#x27;</span>, <span class="string">&#x27;store_id&#x27;</span>, <span class="string">&#x27;transacted_date&#x27;</span>, <span class="string">&#x27;amount&#x27;</span>]</span><br><span class="line">unnecessary_cols = [ <span class="string">&#x27;card_compay&#x27;</span>, <span class="string">&#x27;transacted_time&#x27;</span>, <span class="string">&#x27;installment_term&#x27;</span>,<span class="string">&#x27;region&#x27;</span>,<span class="string">&#x27;type_of_business&#x27;</span> ]</span><br><span class="line"></span><br><span class="line">data1 = sales[necessary_cols]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sales.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 6556613 entries, 0 to 6556612
Data columns (total 9 columns):
 #   Column            Dtype   
---  ------            -----   
 0   store_id          int16   
 1   card_id           int32   
 2   card_company      category
 3   transacted_date   category
 4   transacted_time   category
 5   installment_term  int8    
 6   region            category
 7   type_of_business  category
 8   amount            float32 
dtypes: category(5), float32(1), int16(1), int32(1), int8(1)
memory usage: 125.2 MB</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Before Downcasting </span></span><br><span class="line">sales_bd = np.round(sales.memory_usage().sum()/(<span class="number">1024</span>*<span class="number">1024</span>),<span class="number">1</span>)</span><br><span class="line">sales_bd <span class="comment">#450</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Memory Downcast </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downcast</span>(<span class="params">df</span>):</span></span><br><span class="line">    cols = df.dtypes.index.tolist()</span><br><span class="line">    types = df.dtypes.values.tolist()</span><br><span class="line">    <span class="keyword">for</span> i,t <span class="keyword">in</span> enumerate(types):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;int&#x27;</span> <span class="keyword">in</span> str(t):</span><br><span class="line">            <span class="keyword">if</span> df[cols[i]].min() &gt; np.iinfo(np.int8).min <span class="keyword">and</span> df[cols[i]].max() &lt; np.iinfo(np.int8).max:</span><br><span class="line">                df[cols[i]] = df[cols[i]].astype(np.int8)</span><br><span class="line">            <span class="keyword">elif</span> df[cols[i]].min() &gt; np.iinfo(np.int16).min <span class="keyword">and</span> df[cols[i]].max() &lt; np.iinfo(np.int16).max:</span><br><span class="line">                df[cols[i]] = df[cols[i]].astype(np.int16)</span><br><span class="line">            <span class="keyword">elif</span> df[cols[i]].min() &gt; np.iinfo(np.int32).min <span class="keyword">and</span> df[cols[i]].max() &lt; np.iinfo(np.int32).max:</span><br><span class="line">                df[cols[i]] = df[cols[i]].astype(np.int32)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                df[cols[i]] = df[cols[i]].astype(np.int64)</span><br><span class="line">        <span class="keyword">elif</span> <span class="string">&#x27;float&#x27;</span> <span class="keyword">in</span> str(t):</span><br><span class="line">            <span class="keyword">if</span> df[cols[i]].min() &gt; np.finfo(np.float16).min <span class="keyword">and</span> df[cols[i]].max() &lt; np.finfo(np.float16).max:</span><br><span class="line">                df[cols[i]] = df[cols[i]].astype(np.float16)</span><br><span class="line">            <span class="keyword">elif</span> df[cols[i]].min() &gt; np.finfo(np.float32).min <span class="keyword">and</span> df[cols[i]].max() &lt; np.finfo(np.float32).max:</span><br><span class="line">                df[cols[i]] = df[cols[i]].astype(np.float32)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                df[cols[i]] = df[cols[i]].astype(np.float64)</span><br><span class="line">        <span class="keyword">elif</span> t == np.object:</span><br><span class="line">            <span class="keyword">if</span> cols[i] == <span class="string">&#x27;date&#x27;</span>:</span><br><span class="line">                df[cols[i]] = pd.to_datetime(df[cols[i]], format=<span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                df[cols[i]] = df[cols[i]].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> df  </span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Downcast Data</span></span><br><span class="line">sales = downcast(sales)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># After Downcasting </span></span><br><span class="line">sales_ad = np.round(sales.memory_usage().sum()/(<span class="number">1024</span>*<span class="number">1024</span>),<span class="number">1</span>) <span class="comment">#125.2</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Downcasting Graph </span></span><br><span class="line"><span class="keyword">import</span> plotly_express <span class="keyword">as</span> px</span><br><span class="line"></span><br><span class="line">dic = &#123;<span class="string">&#x27;DataFrame&#x27;</span>:[<span class="string">&#x27;sales&#x27;</span>],</span><br><span class="line">       <span class="string">&#x27;Before downcasting&#x27;</span>:[sales_bd],</span><br><span class="line">       <span class="string">&#x27;After downcasting&#x27;</span>:[sales_ad]&#125;</span><br><span class="line"></span><br><span class="line">memory = pd.DataFrame(dic)</span><br><span class="line">memory = pd.melt(memory, id_vars=<span class="string">&#x27;DataFrame&#x27;</span>, var_name=<span class="string">&#x27;Status&#x27;</span>, value_name=<span class="string">&#x27;Memory (MB)&#x27;</span>)</span><br><span class="line">memory.sort_values(<span class="string">&#x27;Memory (MB)&#x27;</span>,inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">fig = px.bar(memory, x=<span class="string">&#x27;DataFrame&#x27;</span>, y=<span class="string">&#x27;Memory (MB)&#x27;</span>, color=<span class="string">&#x27;Status&#x27;</span>, barmode=<span class="string">&#x27;group&#x27;</span>, text=<span class="string">&#x27;Memory (MB)&#x27;</span>)</span><br><span class="line">fig.update_traces(texttemplate=<span class="string">&#x27;%&#123;text&#125; MB&#x27;</span>, textposition=<span class="string">&#x27;outside&#x27;</span>)</span><br><span class="line">fig.update_layout(template=<span class="string">&#x27;seaborn&#x27;</span>, title=<span class="string">&#x27;Effect of Downcasting&#x27;</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/img/Figure1_Memory.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## EDA </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. raw data</span></span><br><span class="line"></span><br><span class="line">sales.info()</span><br><span class="line"><span class="comment"># RangeIndex: 6556613 entries, 0 to 6556612</span></span><br><span class="line"><span class="comment"># Data columns (total 9 columns):</span></span><br><span class="line"><span class="comment">#  #   Column            Dtype</span></span><br><span class="line"><span class="comment"># ---  ------            -----</span></span><br><span class="line"><span class="comment">#  0   store_id          int16</span></span><br><span class="line"><span class="comment">#  1   card_id           int32</span></span><br><span class="line"><span class="comment">#  2   card_company      category</span></span><br><span class="line"><span class="comment">#  3   transacted_date   category</span></span><br><span class="line"><span class="comment">#  4   transacted_time   category</span></span><br><span class="line"><span class="comment">#  5   installment_term  int8</span></span><br><span class="line"><span class="comment">#  6   region            category</span></span><br><span class="line"><span class="comment">#  7   type_of_business  category</span></span><br><span class="line"><span class="comment">#  8   amount            float32</span></span><br><span class="line"><span class="comment"># dtypes: category(5), float32(1), int16(1), int32(1), int8(1)</span></span><br><span class="line"><span class="comment"># memory usage: 125.2 MB</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.1 missing values </span></span><br><span class="line"></span><br><span class="line">sales.isnull().sum()</span><br><span class="line"><span class="comment"># store_id                  0</span></span><br><span class="line"><span class="comment"># card_id                   0</span></span><br><span class="line"><span class="comment"># card_company              0</span></span><br><span class="line"><span class="comment"># transacted_date           0</span></span><br><span class="line"><span class="comment"># transacted_time           0</span></span><br><span class="line"><span class="comment"># installment_term          0</span></span><br><span class="line"><span class="comment"># region              2042766</span></span><br><span class="line"><span class="comment"># type_of_business    3952609</span></span><br><span class="line"><span class="comment"># amount                    0</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.2 columns</span></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.2.1 [&#x27;store_id&#x27;]</span></span><br><span class="line"></span><br><span class="line">len(sales[<span class="string">&#x27;store_id&#x27;</span>].unique()) <span class="comment">#1967</span></span><br><span class="line"><span class="comment">## 1967개의 store_id 가 존재한다. </span></span><br><span class="line">store_counts = sales[<span class="string">&#x27;store_id&#x27;</span>].value_counts().reset_index()</span><br><span class="line">store_counts = pd.DataFrame(store_counts )</span><br><span class="line">store_counts.columns = [<span class="string">&#x27;store_id&#x27;</span>,<span class="string">&#x27;counts&#x27;</span>]</span><br><span class="line"></span><br><span class="line">store_counts</span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">8</span>))</span><br><span class="line">ax = sns.barplot(x=<span class="string">&quot;store_id&quot;</span> , y = <span class="string">&quot;counts&quot;</span>, data =store_counts, order=store_counts[<span class="string">&#x27;store_id&#x27;</span>]  )</span><br><span class="line">ax.set( ylabel=<span class="string">&quot;counts&quot;</span>)</span><br><span class="line"><span class="comment"># for item in ax.get_xticklabels():</span></span><br><span class="line"><span class="comment">#     item.set_rotation(90)</span></span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/Figure_1_Store_id_counts.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.2.2 [&#x27;card_company]</span></span><br><span class="line">len(sales) </span><br><span class="line"><span class="comment"># = 6,556,613</span></span><br><span class="line">len(sales[<span class="string">&#x27;card_id&#x27;</span>].unique())  </span><br><span class="line"><span class="comment"># = 3,950,001</span></span><br><span class="line"><span class="comment">## sales 데이터의 entry 는 card_id를 기준으로 작성되었다.</span></span><br><span class="line"><span class="comment">## 따라서, 1 entry = 1 card transaction 으로 이해할 수 있다. </span></span><br><span class="line"><span class="comment">## 하지만 데이터상의 고유 card_id 의 수는 3,950,001 개로, 전체 거래량인 6,556,613 에 비해서 40% 정도 작다. </span></span><br><span class="line"><span class="comment">## 그러므로 전체 거래량의 40%는 동일한 카드의 중복거래란 것을 확인할 수 있다. </span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 1.2.3 [&#x27;card_company&#x27;]</span></span><br><span class="line"></span><br><span class="line">sales.card_company </span><br><span class="line"><span class="comment">## Categories (8, object): [a, b, c, d, e, f, g, h]</span></span><br><span class="line"></span><br><span class="line">card_company = sales[<span class="string">&#x27;card_company&#x27;</span>].value_counts()</span><br><span class="line">card_company = pd.DataFrame(card_company)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">8</span>))</span><br><span class="line">ax = sns.barplot(x=card_company.index , y = <span class="string">&quot;card_company&quot;</span>, data =card_company )</span><br><span class="line">ax.set( Xlabel=<span class="string">&quot;card company&quot;</span>, ylabel=<span class="string">&quot;counts&quot;</span>)</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">## 카드사별로 전체 거래에서 사용된 빈도 차이가 있다. 하지만 거래의 집계는 card_id 가 아닌, store_id 별로</span></span><br><span class="line"><span class="comment">## 진행을 할 예정이기 때문에 일단 참고만 하고 넘어가도록 한다. </span></span><br></pre></td></tr></table></figure>
<p><img src="/img/Figure_1_Card_company.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 1.2.4 [&#x27;transacted_date&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 카드 거래일자는 2016년 6월1일부터, 2019년 2월 28일까지이며, day 기준으로 1002 일이다. </span></span><br><span class="line"><span class="comment">## 본 대회의 경우, 1002일 간의 카드거래 데이터로, 향후 3달후의 상점별 매출액을 예상하는 대회이다. </span></span><br><span class="line"><span class="comment">## 따라서 거래일자는 아래와 같은 구간으로 나눠진다. </span></span><br><span class="line"><span class="comment">## train period : 2016.6.1 ~ 2019.2.28 (1002 days) </span></span><br><span class="line"><span class="comment">## test period  : 2019.3.1 ~ 2019.5.31 (91 days)</span></span><br><span class="line"></span><br><span class="line">sales[<span class="string">&#x27;transacted_date&#x27;</span>]</span><br><span class="line"><span class="comment"># 0          2016-06-01</span></span><br><span class="line"><span class="comment"># 1          2016-06-01</span></span><br><span class="line"><span class="comment"># 2          2016-06-01</span></span><br><span class="line"><span class="comment"># 3          2016-06-01</span></span><br><span class="line"><span class="comment"># 4          2016-06-02</span></span><br><span class="line"><span class="comment">#               ...</span></span><br><span class="line"><span class="comment"># 6556608    2019-02-28</span></span><br><span class="line"><span class="comment"># 6556609    2019-02-28</span></span><br><span class="line"><span class="comment"># 6556610    2019-02-28</span></span><br><span class="line"><span class="comment"># 6556611    2019-02-28</span></span><br><span class="line"><span class="comment"># 6556612    2019-02-28</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#월별, 일별 2차 파생 그래프? 라고해야되나. 요거는 한 번 쭉 훑고 그다음에 다시 만들자.. !  ㅇㅋ~ </span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.2.5 [&#x27;transacted_time&#x27;] &amp; [&#x27;installment_term]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## transacted_time 과 installment_term 각각 카드거래 시각과 할부 개월수를 의미한다. </span></span><br><span class="line"><span class="comment">## 이러한 분포는 상점의 사업종류에 따라서 편차가 클 것으로 예상된다. </span></span><br><span class="line"><span class="comment">## 상점 하나(store_id == 1000)를 샘플로 골라서, 분포를 살펴보도록 하겠다. </span></span><br><span class="line"><span class="comment">## 선택된 상점의 경우에, type of business 가 &#x27;의복 소매업&#x27;이다. 따라서 사람들이 많이 쇼핑하는 </span></span><br><span class="line"><span class="comment">## 주말 오후 시간대 14 ~ 18 시 사이에, 카드결제 시간이 몰려 있는 것으로 확인된다. </span></span><br><span class="line"></span><br><span class="line">store_1000 = sales[ sales[<span class="string">&#x27;store_id&#x27;</span>] == <span class="number">1000</span> ]</span><br><span class="line"><span class="comment">###</span></span><br><span class="line">len(store_1000)</span><br><span class="line">blank = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(store_1000)):   </span><br><span class="line">    str1 = int(store_1000[<span class="string">&#x27;transacted_time&#x27;</span>].iloc[i][<span class="number">0</span>:<span class="number">2</span>])</span><br><span class="line">    blank.append(str1)</span><br><span class="line">blank</span><br><span class="line">blank = pd.DataFrame(blank, columns=[<span class="string">&#x27;Count&#x27;</span>])</span><br><span class="line">time_count = pd.DataFrame(blank[<span class="string">&#x27;Count&#x27;</span>].value_counts())</span><br><span class="line"><span class="comment">###</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">8</span>))</span><br><span class="line">ax = sns.barplot(x=time_count.index , y = <span class="string">&quot;Count&quot;</span>, data =time_count )</span><br><span class="line">ax.set( Xlabel=<span class="string">&quot;transacted_time&quot;</span>, ylabel=<span class="string">&quot;counts&quot;</span>)</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/img/Figure_1_Transacted_time_counts.png"></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Card_Sales_EDA</p><p><a href="http://yoursite.com/2020/10/08/Card_Sales_EDA/">http://yoursite.com/2020/10/08/Card_Sales_EDA/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Eric Park</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-10-08</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2020-10-08</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Python/">Python</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/09/27/1%EA%B8%89-2%EC%B0%A8-01%EB%B2%88/"><span class="level-item">Cos Pro Python 1급 2차 01번 문제풀이</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Eric"></figure><p class="title is-size-4 is-block line-height-inherit">Eric</p><p class="is-size-6 is-block">Developer blog</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Seonyudo</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tag</p><a href="/tags"><p class="title">1</p></a></div></div></nav><div class="level"><a class="level-item button has-background-warning" href="/" target="_blank" rel="noopener">Have a nice day</a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Kaggle/"><span class="level-start"><span class="level-item">Kaggle</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Portfolio/"><span class="level-start"><span class="level-item">Portfolio</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Python/Cos-Pro-1%EA%B8%89/"><span class="level-start"><span class="level-item">Cos Pro 1급</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-10-08T04:05:12.000Z">2020-10-08</time></p><p class="title is-6"><a class="link-muted" href="/2020/10/08/Card_Sales_EDA/">Card_Sales_EDA</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Portfolio/">Portfolio</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-27T10:05:12.000Z">2020-09-27</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/27/1%EA%B8%89-2%EC%B0%A8-01%EB%B2%88/">Cos Pro Python 1급 2차 01번 문제풀이</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Python/">Python</a> / <a class="link-muted" href="/categories/Python/Cos-Pro-1%EA%B8%89/">Cos Pro 1급</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-27T09:05:12.000Z">2020-09-27</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/27/1%EA%B8%89-1%EC%B0%A8-10%EB%B2%88/">Cos Pro Python 1급 1차 10번 문제풀이</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Python/">Python</a> / <a class="link-muted" href="/categories/Python/Cos-Pro-1%EA%B8%89/">Cos Pro 1급</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-27T04:05:12.000Z">2020-09-27</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/27/1%EA%B8%89-1%EC%B0%A8-09%EB%B2%88/">Cos Pro Python 1급 1차 09번 문제풀이</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Python/">Python</a> / <a class="link-muted" href="/categories/Python/Cos-Pro-1%EA%B8%89/">Cos Pro 1급</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-09-21T22:05:12.000Z">2020-09-22</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/22/project_kaggle_m5_0922/">Kaggle M5 Competition Part 1 -EDA</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Kaggle/">Kaggle</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">12</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="" height="28"></a><p class="size-small"><span>&copy; 2020 Eric Park</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><!--!--></body></html>